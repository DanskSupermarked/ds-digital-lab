!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){!function(){var e=function(t){var n=new e.Index;return n.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),t&&t.call(n,n),n};e.version="0.6.0",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),e.utils.asString=function(e){return void 0===e||null===e?"":e.toString()},e.EventEmitter=function(){this.events={}},e.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},e.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);this.events[e].splice(n,1),this.events[e].length||delete this.events[e]}},e.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)})}},e.EventEmitter.prototype.hasHandler=function(e){return e in this.events},e.tokenizer=function(t){return arguments.length&&null!=t&&void 0!=t?Array.isArray(t)?t.map(function(t){return e.utils.asString(t).toLowerCase()}):t.toString().trim().toLowerCase().split(e.tokenizer.seperator):[]},e.tokenizer.seperator=/[\s\-]+/,e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions={},e.Pipeline.registerFunction=function(t,n){n in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+n),t.label=n,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){var n=t.label&&t.label in this.registeredFunctions;n||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var n=new e.Pipeline;return t.forEach(function(t){var r=e.Pipeline.registeredFunctions[t];if(!r)throw new Error("Cannot load un-registered function: "+t);n.add(r)}),n},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,n){e.Pipeline.warnIfFunctionNotRegistered(n);var r=this._stack.indexOf(t);if(-1==r)throw new Error("Cannot find existingFn");r+=1,this._stack.splice(r,0,n)},e.Pipeline.prototype.before=function(t,n){e.Pipeline.warnIfFunctionNotRegistered(n);var r=this._stack.indexOf(t);if(-1==r)throw new Error("Cannot find existingFn");this._stack.splice(r,0,n)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);-1!=t&&this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,r=this._stack.length,i=0;n>i;i++){for(var o=e[i],s=0;r>s&&(o=this._stack[s](o,i,e),void 0!==o&&""!==o);s++);void 0!==o&&""!==o&&t.push(o)}return t},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},e.Vector.Node=function(e,t,n){this.idx=e,this.val=t,this.next=n},e.Vector.prototype.insert=function(t,n){this._magnitude=void 0;var r=this.list;if(!r)return this.list=new e.Vector.Node(t,n,r),this.length++;if(t<r.idx)return this.list=new e.Vector.Node(t,n,r),this.length++;for(var i=r,o=r.next;void 0!=o;){if(t<o.idx)return i.next=new e.Vector.Node(t,n,o),this.length++;i=o,o=o.next}return i.next=new e.Vector.Node(t,n,o),this.length++},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var e,t=this.list,n=0;t;)e=t.val,n+=e*e,t=t.next;return this._magnitude=Math.sqrt(n)},e.Vector.prototype.dot=function(e){for(var t=this.list,n=e.list,r=0;t&&n;)t.idx<n.idx?t=t.next:t.idx>n.idx?n=n.next:(r+=t.val*n.val,t=t.next,n=n.next);return r},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.SortedSet=function(){this.length=0,this.elements=[]},e.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},e.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},e.SortedSet.prototype.toArray=function(){return this.elements.slice()},e.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},e.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},e.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,r=n-t,i=t+Math.floor(r/2),o=this.elements[i];r>1;){if(o===e)return i;e>o&&(t=i),o>e&&(n=i),r=n-t,i=t+Math.floor(r/2),o=this.elements[i]}return o===e?i:-1},e.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,r=n-t,i=t+Math.floor(r/2),o=this.elements[i];r>1;)e>o&&(t=i),o>e&&(n=i),r=n-t,i=t+Math.floor(r/2),o=this.elements[i];return o>e?i:e>o?i+1:void 0},e.SortedSet.prototype.intersect=function(t){for(var n=new e.SortedSet,r=0,i=0,o=this.length,s=t.length,a=this.elements,u=t.elements;;){if(r>o-1||i>s-1)break;a[r]!==u[i]?a[r]<u[i]?r++:a[r]>u[i]&&i++:(n.add(a[r]),r++,i++)}return n},e.SortedSet.prototype.clone=function(){var t=new e.SortedSet;return t.elements=this.toArray(),t.length=t.elements.length,t},e.SortedSet.prototype.union=function(e){var t,n,r;return this.length>=e.length?(t=this,n=e):(t=e,n=this),r=t.clone(),r.add.apply(r,n.toArray()),r},e.SortedSet.prototype.toJSON=function(){return this.toArray()},e.Index=function(){this._fields=[],this._ref="id",this.pipeline=new e.Pipeline,this.documentStore=new e.Store,this.tokenStore=new e.TokenStore,this.corpusTokens=new e.SortedSet,this.eventEmitter=new e.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},e.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},e.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},e.Index.load=function(t){t.version!==e.version&&e.utils.warn("version mismatch: current "+e.version+" importing "+t.version);var n=new this;return n._fields=t.fields,n._ref=t.ref,n.documentStore=e.Store.load(t.documentStore),n.tokenStore=e.TokenStore.load(t.tokenStore),n.corpusTokens=e.SortedSet.load(t.corpusTokens),n.pipeline=e.Pipeline.load(t.pipeline),n},e.Index.prototype.field=function(e,t){var t=t||{},n={name:e,boost:t.boost||1};return this._fields.push(n),this},e.Index.prototype.ref=function(e){return this._ref=e,this},e.Index.prototype.add=function(t,n){var r={},i=new e.SortedSet,o=t[this._ref],n=void 0===n?!0:n;this._fields.forEach(function(n){var o=this.pipeline.run(e.tokenizer(t[n.name]));r[n.name]=o,e.SortedSet.prototype.add.apply(i,o)},this),this.documentStore.set(o,i),e.SortedSet.prototype.add.apply(this.corpusTokens,i.toArray());for(var s=0;s<i.length;s++){var a=i.elements[s],u=this._fields.reduce(function(e,t){var n=r[t.name].length;if(!n)return e;var i=r[t.name].filter(function(e){return e===a}).length;return e+i/n*t.boost},0);this.tokenStore.add(a,{ref:o,tf:u})}n&&this.eventEmitter.emit("add",t,this)},e.Index.prototype.remove=function(e,t){var n=e[this._ref],t=void 0===t?!0:t;if(this.documentStore.has(n)){var r=this.documentStore.get(n);this.documentStore.remove(n),r.forEach(function(e){this.tokenStore.remove(e,n)},this),t&&this.eventEmitter.emit("remove",e,this)}},e.Index.prototype.update=function(e,t){var t=void 0===t?!0:t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},e.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,t))return this._idfCache[t];var n=this.tokenStore.count(e),r=1;return n>0&&(r=1+Math.log(this.documentStore.length/n)),this._idfCache[t]=r},e.Index.prototype.search=function(t){var n=this.pipeline.run(e.tokenizer(t)),r=new e.Vector,i=[],o=this._fields.reduce(function(e,t){return e+t.boost},0),s=n.some(function(e){return this.tokenStore.has(e)},this);if(!s)return[];n.forEach(function(t,n,s){var a=1/s.length*this._fields.length*o,u=this,l=this.tokenStore.expand(t).reduce(function(n,i){var o=u.corpusTokens.indexOf(i),s=u.idf(i),l=1,c=new e.SortedSet;if(i!==t){var d=Math.max(3,i.length-t.length);l=1/Math.log(d)}o>-1&&r.insert(o,a*s*l);for(var f=u.tokenStore.get(i),h=Object.keys(f),p=h.length,m=0;p>m;m++)c.add(f[h[m]].ref);return n.union(c)},new e.SortedSet);i.push(l)},this);var a=i.reduce(function(e,t){return e.intersect(t)});return a.map(function(e){return{ref:e,score:r.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})},e.Index.prototype.documentVector=function(t){for(var n=this.documentStore.get(t),r=n.length,i=new e.Vector,o=0;r>o;o++){var s=n.elements[o],a=this.tokenStore.get(s)[t].tf,u=this.idf(s);i.insert(this.corpusTokens.indexOf(s),a*u)}return i},e.Index.prototype.toJSON=function(){return{version:e.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},e.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.Store=function(){this.store={},this.length=0},e.Store.load=function(t){var n=new this;return n.length=t.length,n.store=Object.keys(t.store).reduce(function(n,r){return n[r]=e.SortedSet.load(t.store[r]),n},{}),n},e.Store.prototype.set=function(e,t){this.has(e)||this.length++,this.store[e]=t},e.Store.prototype.get=function(e){return this.store[e]},e.Store.prototype.has=function(e){return e in this.store},e.Store.prototype.remove=function(e){this.has(e)&&(delete this.store[e],this.length--)},e.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",r="[aeiouy]",i=n+"[^aeiouy]*",o=r+"[aeiou]*",s="^("+i+")?"+o+i,a="^("+i+")?"+o+i+"("+o+")?$",u="^("+i+")?"+o+i+o+i,l="^("+i+")?"+r,c=new RegExp(s),d=new RegExp(u),f=new RegExp(a),h=new RegExp(l),p=/^(.+?)(ss|i)es$/,m=/^(.+?)([^s])s$/,v=/^(.+?)eed$/,g=/^(.+?)(ed|ing)$/,y=/.$/,_=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),S=new RegExp("^"+i+r+"[^aeiouwxy]$"),b=/^(.+?[^aeiou])y$/,x=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,E=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,k=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,L=/^(.+?)(s|t)(ion)$/,O=/^(.+?)e$/,P=/ll$/,M=new RegExp("^"+i+r+"[^aeiouwxy]$"),T=function(n){var r,i,o,s,a,u,l;if(n.length<3)return n;if(o=n.substr(0,1),"y"==o&&(n=o.toUpperCase()+n.substr(1)),s=p,a=m,s.test(n)?n=n.replace(s,"$1$2"):a.test(n)&&(n=n.replace(a,"$1$2")),s=v,a=g,s.test(n)){var T=s.exec(n);s=c,s.test(T[1])&&(s=y,n=n.replace(s,""))}else if(a.test(n)){var T=a.exec(n);r=T[1],a=h,a.test(r)&&(n=r,a=_,u=w,l=S,a.test(n)?n+="e":u.test(n)?(s=y,n=n.replace(s,"")):l.test(n)&&(n+="e"))}if(s=b,s.test(n)){var T=s.exec(n);r=T[1],n=r+"i"}if(s=x,s.test(n)){var T=s.exec(n);r=T[1],i=T[2],s=c,s.test(r)&&(n=r+e[i])}if(s=E,s.test(n)){var T=s.exec(n);r=T[1],i=T[2],s=c,s.test(r)&&(n=r+t[i])}if(s=k,a=L,s.test(n)){var T=s.exec(n);r=T[1],s=d,s.test(r)&&(n=r)}else if(a.test(n)){var T=a.exec(n);r=T[1]+T[2],a=d,a.test(r)&&(n=r)}if(s=O,s.test(n)){var T=s.exec(n);r=T[1],s=d,a=f,u=M,(s.test(r)||a.test(r)&&!u.test(r))&&(n=r)}return s=P,a=d,s.test(n)&&a.test(n)&&(s=y,n=n.replace(s,"")),"y"==o&&(n=o.toLowerCase()+n.substr(1)),n};return T}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){return e&&t[e]!==e?e:void 0}},e.stopWordFilter=e.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenStore=function(){this.root={docs:{}},this.length=0},e.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},e.TokenStore.prototype.add=function(e,t,n){var n=n||this.root,r=e.charAt(0),i=e.slice(1);return r in n||(n[r]={docs:{}}),0===i.length?(n[r].docs[t.ref]=t,void(this.length+=1)):this.add(i,t,n[r])},e.TokenStore.prototype.has=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e.charAt(n)])return!1;t=t[e.charAt(n)]}return!0},e.TokenStore.prototype.getNode=function(e){if(!e)return{};for(var t=this.root,n=0;n<e.length;n++){if(!t[e.charAt(n)])return{};t=t[e.charAt(n)]}return t},e.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},e.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},e.TokenStore.prototype.remove=function(e,t){if(e){for(var n=this.root,r=0;r<e.length;r++){if(!(e.charAt(r)in n))return;n=n[e.charAt(r)]}delete n.docs[t]}},e.TokenStore.prototype.expand=function(e,t){var n=this.getNode(e),r=n.docs||{},t=t||[];return Object.keys(r).length&&t.push(e),Object.keys(n).forEach(function(n){"docs"!==n&&t.concat(this.expand(e+n,t))},this),t},e.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof n?t.exports=r():e.lunr=r()}(this,function(){return e})}()},{}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){var e=document.querySelector(".nav");if(e){var t=document.querySelector("body"),n=e.cloneNode(!0);n.classList.add("nav--sticky"),t.insertBefore(n,t.firstChild),(0,o["default"])(function(){n.classList.remove("nav--active")},function(){n.classList.add("nav--active")},window.innerHeight);var r=function(){var e=window.scrollY||document.documentElement.scrollTop;0>=e?(n.classList.add("nav--hidden"),n.classList.remove("nav--active")):n.classList.remove("nav--hidden")};window.addEventListener("scroll",(0,a["default"])(r)),window.addEventListener("resize",(0,a["default"])(r)),(0,d["default"])().then(function(){(0,l["default"])(".nav__item--sign-in").forEach(function(e){e.innerHTML="Create a story"})})["catch"](function(){})}};var i=e("ds-assets/scroll/scroll-change"),o=r(i),s=e("ds-assets/async/debounce"),a=r(s),u=e("ds-assets/dom/get-all"),l=r(u),c=e("../lib/get-logged-in-data"),d=r(c)},{"../lib/get-logged-in-data":9,"ds-assets/async/debounce":16,"ds-assets/dom/get-all":17,"ds-assets/scroll/scroll-change":21}],3:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){o=document.querySelector(".responses__form"),o&&(s=o.querySelector(".btn--cta"),u=document.querySelector(".responses__list"),a=(0,p["default"])(".validate",o),(0,P["default"])(a,function(e){e?s.classList.remove("btn--disabled"):s.classList.add("btn--disabled")}),T(),(0,w["default"])().then(A)["catch"](function(){}),localStorage.getItem("like:"+window.postId)&&N(),(0,p["default"])(".share__like").forEach(q),s.addEventListener("click",j))};var o,s,a,u,l,c,d,f,h=e("ds-assets/dom/get-all"),p=i(h),m=e("ds-assets/lazy/images"),v=i(m),g=e("../lib/api"),y=r(g),_=e("../lib/get-logged-in-data"),w=i(_),S=e("../templates/response-meta"),b=i(S),x=e("../templates/response"),E=i(x),k=e("ds-assets/dom/get-document-offset-top"),L=i(k),O=e("../lib/form/live-validation"),P=i(O);c=function(){(0,p["default"])(".response__delete").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),y.removeResponse(e.dataset.published,e.dataset.name).then(function(e){l(e.responses),d(e.responses)})})})},f=function(e){var t=e.querySelector(".response__read-more");t&&t.addEventListener("click",function(n){n.preventDefault();var r=e.querySelector(".response__excerpt"),i=t.parentNode;i.parentNode.removeChild(i),r.parentNode.removeChild(r),e.querySelector(".response__text").classList.remove("hidden")})},l=function(e){var t="";e.forEach(function(e){t+=(0,E["default"])(e)}),u.innerHTML=t,(0,v["default"])(1),c(),(0,p["default"])(".response",u).forEach(f)},d=function(e){document.querySelector(".share__responses").innerHTML=e.length};var M=function(e){document.querySelector(".share__likes").innerHTML=e},T=function(){y.getMeta().then(function(e){l(e.responses),d(e.responses),M(e.likes)})},j=function(e){e.preventDefault();var t=document.querySelector("body").classList.contains("logged-in"),n=a.some(function(e){if(!e.classList.contains("validate--valid")){e.classList.add("validate--not-valid");var t=e.querySelector("input, textarea");return t.focus(),!0}});if(!n){var r={};(0,p["default"])("input, textarea",o).forEach(function(e){var n=e.getAttribute("name");e.value&&(r[n]=e.value,t&&"text"!==n||(e.value=""))}),t?document.querySelector(".responses-form__text").classList.remove("validate--valid"):a.forEach(function(e){e.classList.remove("validate--valid")}),s.innerHTML="Posting...",s.classList.add("btn--disabled"),y.addResponse(r).then(function(e){l(e.responses),d(e.responses);var t=u.querySelector(".response:last-child"),n=(0,L["default"])(t);window.scrollTo(0,n-.5*window.innerHeight),s.innerHTML="Respond"})}},N=function(){var e=document.querySelector(".tool-tip__like-icon");e.setAttribute("src","/assets/images/heart--inverse--active.svg"),e.setAttribute("data-src","/assets/images/heart--inverse--active.svg");var t=document.querySelector(".post-footer__like-icon");t.setAttribute("src","/assets/images/heart--active.svg"),t.setAttribute("data-src","/assets/images/heart--active.svg"),(0,p["default"])(".share__like").forEach(function(e){return e.classList.add("disabled")})},q=function(e){e.addEventListener("click",function(e){e.preventDefault(),localStorage.getItem("like:"+window.postId)||(localStorage.setItem("like:"+window.postId,!0),N(),y.like().then(function(e){M(e.likes)}))})},A=function(e){var t=(0,b["default"])(e),n=document.createElement("div");n.innerHTML=t;var r=document.querySelector(".responses__form h3");(0,p["default"])(".responses__form input").forEach(function(t){var n=t.getAttribute("name");"website"===n?t.value="/author/"+e.slug:t.value=e[n],t.parentNode.classList.add("validate--valid")}),r.parentNode.insertBefore(n,r.nextSibling),(0,v["default"])(1)}},{"../lib/api":6,"../lib/form/live-validation":7,"../lib/get-logged-in-data":9,"../templates/response":14,"../templates/response-meta":13,"ds-assets/dom/get-all":17,"ds-assets/dom/get-document-offset-top":18,"ds-assets/lazy/images":19}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){w()["catch"](function(e){return console.error(e)}),S()["catch"](function(e){return console.error(e)}),b()["catch"](function(e){return console.error(e)}),i=document.querySelector(".search__input"),o=document.querySelector(".search__list"),i&&o&&(i.addEventListener("input",function(){var e=x(i.value);E(e)}),i.focus(),o.setAttribute("style","min-height: "+window.innerHeight+"px"))};var i,o,s=e("lunr"),a=r(s),u=e("ds-assets/lazy/images"),l=r(u),c=e("ds-assets/dom/get-all"),d=r(c),f=e("../lib/strip-html-tags"),h=r(f),p=e("../templates/search-result"),m=r(p),v={},g=(0,a["default"])(function(){this.field("title",{boost:10}),this.field("description"),this.ref("id")}),y=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?function(e){return e}:arguments[2],r=localStorage.getItem("search:"+e+":expires");if(r&&r>Date.now()){var i=localStorage.getItem("search:"+e+":data");if(i)return Promise.resolve(JSON.parse(i))}var o=window.ghost.url.api(e,t);return fetch(o,{method:"GET"}).then(function(e){return 200!==e.status?Promise.reject(e.status):e.json()}).then(function(t){return t[e].map(n)}).then(function(t){localStorage.setItem("search:"+e+":data",JSON.stringify(t));var n=Date.now()+864e5;return localStorage.setItem("search:"+e+":expires",n),t})},_=function(e,t,n){return y(e,t,n).then(function(e){e.forEach(function(e){v[e.id]=e,g.add(e)})})},w=function(){return _("posts",{limit:"all",fields:"title,html,uuid,slug"},function(e){return{title:e.title,description:(0,h["default"])(e.html),id:e.uuid,url:"/"+e.slug+"/",category:"article"}})},S=function(){return _("tags",{limit:"all",fields:"description,name,slug,uuid"},function(e){return{title:e.name,description:e.description,id:e.uuid,url:"/tag/"+e.slug+"/",category:"tag"}})},b=function(){return _("users",{limit:"all",fields:"bio,name,slug,uuid"},function(e){return{title:e.name,description:e.bio,id:e.uuid,url:"/author/"+e.slug+"/",category:"author"}})},x=function(e){return g.search(e).map(function(e){return v[e.ref]})},E=function(e){var t="";e.forEach(function(e){t+=(0,m["default"])(e)}),o.innerHTML=t,(0,d["default"])(".boxes__item",o).forEach(function(e,t){setTimeout(function(){e.classList.remove("hidden"),setTimeout(function(){return e.classList.add("animate--active")},0)},300+250*t)}),(0,l["default"])(1)}},{"../lib/strip-html-tags":11,"../templates/search-result":15,"ds-assets/dom/get-all":17,"ds-assets/lazy/images":19,lunr:1}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){if(r=document.querySelector(".content"),i=document.querySelector(".tool-tip"),r&&i){o=i.querySelector(".tool-tip__twitter"),document.addEventListener("mouseup",u),document.addEventListener("keyup",u);var e=document.querySelector(".responses__form textarea");i.querySelector(".tool-tip__response").addEventListener("click",function(t){t.preventDefault();var n=s();e.value="“"+n+"”\n\n",e.focus()})}};var r,i,o,s=function(){var e="";return"undefined"!=typeof window.getSelection?e=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"===document.selection.type&&(e=document.selection.createRange().text),e},a=function(e){for(var t=e.anchorNode.parentElement;t!==r&&t.parentNode;)t=t.parentNode;return t===r},u=function(){setTimeout(function(){var e=s();if(!e)return void i.classList.remove("tool-tip--visible");var t=window.getSelection();if(!a(t))return void i.classList.remove("tool-tip--visible");o.setAttribute("href","https://twitter.com/intent/tweet?text="+encodeURIComponent('"'+e+'" - '+o.dataset.url));var n=window.scrollY||document.documentElement.scrollTop,r=t.getRangeAt(0),u=r.getBoundingClientRect();i.style.top=u.top+n+"px",i.classList.add("tool-tip--visible"),i.style.left=.5*u.left+.5*u.right-.5*i.clientWidth+"px"},10)}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=window.apiURL,i=window.postId,o=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"GET":arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],i={method:t,headers:{"Content-Type":"application/json; charset=utf-8"}};return n&&(i.body=JSON.stringify(n)),fetch(r+e,i).then(function(e){return e.status>=300?Promise.reject(e):e}).then(function(e){return e.json()})},s=n.getMeta=function(e){var t="?id="+i;return e&&(t+="&raw"),o(t)["catch"](function(){return o("","POST",{responses:[],likes:0,id:i})})};n.like=function(){return s(i,!0).then(function(e){return o("?id="+i,"PUT",{likes:e.likes+1})})},n.addResponse=function(e){return s(!0).then(function(t){return e.published=(new Date).toISOString(),t.responses.push(e),o("?id="+i,"PUT",{responses:t.responses})})},n.removeResponse=function(e,t){return s(!0).then(function(n){var r=n.responses.filter(function(n){return n.published!==e||n.name!==t});return o("?id="+i,"PUT",{responses:r})})}},{}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){e.forEach(function(n){var r=n.querySelector("input, textarea");r.addEventListener("input",function(){var n=(0,o["default"])(e);t(n)})})};var i=e("./validate"),o=r(i)},{"./validate":8}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=e.some(function(e){return void 0!==e.dataset.validateRequired?!e.classList.contains("validate--valid"):e.classList.contains("validate--not-valid")});return!t}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){return r||(r=o()),r};var r,i=function(e){return fetch("/ghost/api/v0.1/users/me/?include=roles&status=all",{method:"GET",headers:{Authorization:"Bearer "+e}}).then(function(e){return 200!==e.status?Promise.reject("Old session"):e.json()}).then(function(e){return e.users[0]})},o=function(){var e=localStorage.getItem("ghost:session");if(!e)return Promise.reject("No session");var t=JSON.parse(e);return t&&t.authenticated&&t.authenticated.access_token?t.authenticated.expires_at<Date.now()?Promise.reject("Session expired"):i(t.authenticated.access_token):Promise.reject("No session")}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML;return t.replace(/\r?\n/g,"<br>")}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}},{}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=e("ds-assets/lazy/images"),o=r(i),s=e("ds-assets/dom/get-all"),a=r(s),u=e("ds-assets/validate/input-fields"),l=r(u),c=e("./components/navigation"),d=r(c),f=e("./components/response"),h=r(f),p=e("./components/tool-tip"),m=r(p),v=e("./components/search"),g=r(v),y=e("./lib/get-logged-in-data"),_=r(y);(0,d["default"])(),(0,m["default"])(),(0,g["default"])(),(0,a["default"])("img").forEach(function(e){e.onload=function(){this.classList.add("animate--active")}}),(0,o["default"])(1),(0,l["default"])(),(0,h["default"])(),(0,_["default"])().then(function(e){var t=document.querySelector("body");t.classList.add("user-logged-in");var n=e.roles.some(function(e){return"Owner"===e.name||"Administrator"===e.name});n&&t.classList.add("admin-logged-in"),e.name===window.authorName&&t.classList.add("author-logged-in")})["catch"](function(){})},{"./components/navigation":2,"./components/response":3,"./components/search":4,"./components/tool-tip":5,"./lib/get-logged-in-data":9,"ds-assets/dom/get-all":17,"ds-assets/lazy/images":19,"ds-assets/validate/input-fields":24}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t="";return e.image&&(t='\n<td width="5%"><img data-src="'+e.image+'" class="author__image author__image--small lazy-image img-bg round-img"></td>\n		'),'\n<div class="author small">\n  <table><tbody><tr>\n		'+t+'\n    <td>\n      <span class="author__name">'+e.name+"</span>\n    </td>\n  </tr></tbody></table>\n</div>\n"}},{}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t="response boxes__item";e.name.toLowerCase()===window.authorName.toLowerCase()&&(t+=" boxes__item--transparent");var n="";e.image&&(n='<td width="5%"><img data-src="'+e.image+'" class="author__image author__image--small lazy-image img-bg round-img"></td>');var r="";e.readTime&&(r=" &middot; "+e.readTime+" read");var i=e.excerpt||e.text,s="";e.excerpt&&(s='\n<p class="response__text small hidden">'+(0,o["default"])(e.text)+'</p>\n<p><a href="#" class="btn response__read-more">Read more</a></p>\n');var a=""+(0,o["default"])(e.name);return e.website&&(a='<a href="'+(0,o["default"])(e.website)+'">'+a+"</a>"),'\n<div class="'+t+' small">\n  <div class="author">\n    <table>\n      <tr>\n        '+n+'\n        <td>\n          <span class="author__name">'+a+"</span><br>\n          "+e.timeAgo+r+'\n        </td>\n      </tr>\n    </table>\n  </div>\n  <a href="#" class="response__delete" data-published="'+e.published+'" data-name="'+e.name+'"><img data-src="/assets/images/trash.svg" class="lazy-image"></a>\n  <p class="response__excerpt">'+(0,o["default"])(i)+"</p>\n  "+s+"\n</div>"};var i=e("../lib/html-encode"),o=r(i)},{"../lib/html-encode":10}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){window.e=e.description,window.t=e.title,window.reg=new RegExp(e.title,"gi");var t=e.description||"";return t=t.replace(new RegExp(e.title,"gi"),""),t.length>300&&(t=t.substr(0,300)+"..."),'\n<article class="boxes__item small animate animate__fade-in hidden">\n	<h3 class="search__category">'+e.category+'</h3>\n	<h2 class="no-margin-top">'+e.title+"</h2>\n	<p>"+t+'</p>\n	<p><a href="'+e.url+'" class="btn">Read more</a></p>\n</article>\n'}},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e,t){var n=!1,r=function(){n=!1};return function(){n||(n=!0,e.apply(this,arguments),t?window.setTimeout(r,t):window.requestAnimationFrame(r))}}},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?document:arguments[1];return Array.prototype.slice.call(t.querySelectorAll(e))}},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){for(var t=0;e&&!isNaN(e.offsetTop);)t+=e.offsetTop,e=e.offsetParent;return t}},{}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?.5:arguments[0],t=(0,o["default"])(".lazy-image");window.requestAnimationFrame(function(){t.forEach(function(t){t.dataset.lazyImageListening||(t.setAttribute("data-lazy-image-listening","true"),(0,a["default"])(t,e).then(function(){return c(t)}))})})};var i=e("../dom/get-all"),o=r(i),s=e("../scroll/visible"),a=r(s),u=function(e){e.dataset.src&&e.setAttribute("src",e.dataset.src),e.dataset.srcset&&e.setAttribute("srcset",e.dataset.srcset)},l=function(e){u(e.querySelector("img"));var t=Array.prototype.slice.call(e.querySelectorAll("source"));
t.forEach(function(e){return e.setAttribute("srcset",e.dataset.srcset)})},c=function(e){e.matches("picture")?l(e):e.matches("img")&&u(e),window.picturefill&&window.picturefill({reevaluate:!0})}},{"../dom/get-all":17,"../scroll/visible":22}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=(window.scrollY||document.documentElement.scrollTop)+window.innerHeight*(1+t),r=(0,o["default"])(e);return n>r};var i=e("../dom/get-document-offset-top"),o=r(i)},{"../dom/get-document-offset-top":18}],21:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){var e=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=0,i=!1,s=function(){var o=window.scrollY;!i&&o>n&&o>r?(e(),i=!0):i&&(n>=o||r>o)&&o+window.innerHeight<document.body.clientHeight&&(t(),i=!1),r=o};window.addEventListener("scroll",(0,o["default"])(s)),document.addEventListener("DOMContentLoaded",s)};var i=e("../async/debounce"),o=r(i)},{"../async/debounce":16}],22:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return new Promise(function(n){var r=(0,o["default"])(function(){(0,a["default"])(e,t)&&(window.removeEventListener("scroll",r),window.removeEventListener("resize",r),n())});window.addEventListener("scroll",r),window.addEventListener("resize",r),document.addEventListener("DOMContentLoaded",r),setTimeout(r,0)})};var i=e("../async/debounce"),o=r(i),s=e("./has-scrolled-past"),a=r(s)},{"../async/debounce":16,"./has-scrolled-past":20}],23:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./is-date"),o=r(i),s=e("./is-email"),a=r(s),u=e("./is-float"),l=r(u),c=e("./is-int"),d=r(c),f=e("./is-required"),h=r(f),p=e("./is-url"),m=r(p);n["default"]={isDate:o["default"],isEmail:a["default"],isFloat:l["default"],isInt:d["default"],isRequired:h["default"],isUrl:m["default"]}},{"./is-date":25,"./is-email":26,"./is-float":27,"./is-int":28,"./is-required":29,"./is-url":30}],24:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){(0,o["default"])(".validate").forEach(function(e){var t=e;if(e.matches("input, textarea")||(t=e.querySelector("input, textarea")),t){var n=[];for(var r in e.dataset)if("validate"!==r&&0===r.indexOf("validate")){var i=r.replace("validate","");a["default"]["is"+i]&&n.push(i)}0!==n.length&&t.addEventListener("input",function(){var r=t.value,i=!n.some(function(e){return r||"Required"===e?!a["default"]["is"+e](r):!1});i?(e.classList.add("validate--valid"),e.classList.remove("validate--not-valid")):(e.classList.add("validate--not-valid"),e.classList.remove("validate--valid"))})}})};var i=e("../dom/get-all"),o=r(i),s=e("./"),a=r(s)},{"../dom/get-all":17,"./":23}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return!isNaN(Date.parse(e))}},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;return t.test(e)}},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/;return""!==e&&t.test(e)}},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=/^(?:[-+]?(?:0|[1-9][0-9]*))$/;return t.test(e)}},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return""!==e.trim()}},{}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){var t=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;return t.test(e)}},{}]},{},[12]);